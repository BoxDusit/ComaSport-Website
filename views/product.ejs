<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>รายละเอียดสินค้า</title>

    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>

<body>
    <%- include('navbar') %>

        <% if(product){ %>
            

            <div class="max-w-5xl mx-auto px-6 py-10 grid grid-cols-1 md:grid-cols-2 gap-10 bg-gray-100 rounded-lg shadow-lg">

                <!-- Left: Product Images -->
                <div>
                    <div class=" rounded-lg overflow-hidden">

                        <img class="card-img-top img-fluid w-full object-cover"
                            src="/images/products/<%= product.image %>" alt="" />
                    </div>
                </div>

                <!-- Right: Product Details -->
                <div>
                    <h1 class="text-3xl font-bold mb-2">
                        <%= product.name %>
                    </h1>
                    <p class="text-gray-600 ">
                        <%= product.description %>
                    </p>
                    <h3 class="font-medium  mt-4">Price</h3>
                    <div class=" flex flex-col sm:flex-row items-center justify-between gap-2 sm:gap-4">
                        <% if (product.discount && Number(product.discount)> 0) {
                            const price = Number(product.price) || 0;
                            const discount = Number(product.discount) || 0;
                            const finalPrice = price - discount;
                            const percent = price > 0 ? Math.round((discount / price) * 100) : 0;
                            function formatNumber(num) {
                            return num.toLocaleString();
                            }
                            %>
                            <div class="flex flex-col items-start gap-1">
                                <div class="flex items-center gap-2">
                                    <p class="text-xs sm:text-sm font-semibold text-gray-400 line-through">
                                        ฿<%= formatNumber(price) %>.00
                                    </p>
                                    <span class="text-xs sm:text-sm font-bold text-red-500 bg-red-100 px-2 rounded">
                                        -<%= percent %>%
                                    </span>
                                </div>
                                <p class="text-lg sm:text-3xl font-bold leading-tight text-red-600">
                                    ฿<%= formatNumber(finalPrice) %>.00
                                </p>
                            </div>
                            <% } else { %>
                                <% function formatNumber(num) { return Number(num).toLocaleString(); } %>
                                    <p class="text-lg sm:text-3xl font-bold leading-tight text-gray-900">
                                        ฿<%= formatNumber(product.price) %>.00
                                    </p>
                                    <% } %>

                    </div>
                    
                    

                    

                    <!-- Color options -->
                    <div class="mt-4 mb-4 ">
                        <h3 class="font-medium mb-1">Stock</h3>
                        <div class="flex space-x-3">
                            <h2 class="text-lg font-medium bg-white px-4 py-1 rounded-lg shadow-sm"><%= product.stock %></h2>
                        </div>
                    </div>
                    


                    <!-- Add to bag button -->
                    <button type="button"
                        class="inline-flex items-center rounded-lg bg-gray-900 px-4 sm:px-5 py-2.5 text-sm text-white font-medium hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-300">
                        <svg class="-ms-2 me-2 h-5 w-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24"
                            height="24" fill="none" viewBox="0 0 24 24">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4 4h1.5L8 16m0 0h8m-8 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm8 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm.75-3H7.5M11 7H6.312M17 4v6m-3-3h6">
                            </path>
                        </svg>
                        Add to cart
                    </button>
                    <ul class="mt-2 flex items-center gap-4">
                        <li class="flex items-center gap-2">
                            <svg class="h-4 w-4 text-gray-500 dark:text-gray-400" aria-hidden="true"
                                xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                    stroke-width="2"
                                    d="M13 7h6l2 4m-8-4v8m0-8V6a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v9h2m8 0H9m4 0h2m4 0h2v-4m0 0h-5m3.5 5.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0Zm-10 0a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0Z" />
                            </svg>
                            <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Fast Delivery
                            </p>
                        </li>
                        <li class="flex items-center gap-2">
                            <svg class="h-4 w-4 text-gray-500 dark:text-gray-400" aria-hidden="true"
                                xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                <path stroke="currentColor" stroke-linecap="round" stroke-width="2"
                                    d="M8 7V6c0-.6.4-1 1-1h11c.6 0 1 .4 1 1v7c0 .6-.4 1-1 1h-1M3 18v-7c0-.6.4-1 1-1h11c.6 0 1 .4 1 1v7c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1Zm8-3.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z" />
                            </svg>
                            <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Best Price</p>
                        </li>
                    </ul>

                

                    <!-- Expandable Sections -->
                    <div class="mt-6 border-t pt-4 space-y-2 text-sm text-black cursor-pointer">
                        <div class="hover:underline">Care</div>
                        <div class="hover:underline">Shipping</div>
                        <div class="hover:underline">Returns</div>
                    </div>
                </div>

            </div>

            <% } %>
</body>

</html>